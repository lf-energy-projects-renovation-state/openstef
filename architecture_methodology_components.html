<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Architecture, Methodology, and Components &#8212; OpenSTEF  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script src="_static/documentation_options.js?v=8a448e45"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'architecture_methodology_components';</script>
    <link rel="icon" href="_static/openstef.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API reference" href="api_reference.html" />
    <link rel="prev" title="User guides" href="user_guides.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
    <img src="_static/logo_openstef_small.png" class="logo__image only-light" alt="Logo image">
    <img src="_static/logo_openstef_small.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="about_openstef.html">
                        About OpenSTEF
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="user_guides.html">
                        User guides
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Architecture, Methodology, and Components
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_reference.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="community.html">
                        Community
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/OpenSTEF/openstef" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/openstef/" title="Pypi" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-gift"></i></span>
            <label class="sr-only">Pypi</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://www.lfenergy.org/projects/openstef/" title="LFE Homepage" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-bolt"></i></span>
            <label class="sr-only">LFE Homepage</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="about_openstef.html">
                        About OpenSTEF
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="user_guides.html">
                        User guides
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Architecture, Methodology, and Components
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_reference.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="community.html">
                        Community
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/OpenSTEF/openstef" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/openstef/" title="Pypi" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-gift"></i></span>
            <label class="sr-only">Pypi</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://www.lfenergy.org/projects/openstef/" title="LFE Homepage" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-bolt"></i></span>
            <label class="sr-only">LFE Homepage</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="architecture-methodology-and-components">
<span id="concepts"></span><h1>Architecture, Methodology, and Components<a class="headerlink" href="#architecture-methodology-and-components" title="Link to this heading">¶</a></h1>
<p>Understanding the architecture of OpenSTEF will help you gain insight on how to use this software package
and better understand the rest of the documentation.</p>
<section id="software-architecture">
<h2>Software architecture<a class="headerlink" href="#software-architecture" title="Link to this heading">¶</a></h2>
<p>OpenSTEF is set up as a Python package that performs machine learning in order to forecast energy loads on the energy grid.</p>
<a class="reference internal image-reference" href="_images/software_arch.png"><img alt="_images/software_arch.png" src="_images/software_arch.png" style="width: 830px;" />
</a>
<p>OpenSTEF contains:</p>
<ul class="simple">
<li><p><strong>Prediction job</strong>: input configuration for a task and/or pipeline
(e.g. train an XGB model for a certain location).</p></li>
<li><p><strong>Tasks</strong>: can be called to perform training, forecasting, or evaluation.
All tasks use corresponding pipelines. Tasks include getting data from a database,
raising task exceptions, and writing data to a database.</p></li>
<li><p><strong>Pipelines</strong>: can be called to perform training, forecasting or evaluation by
giving input data to the pipeline. Users can choose to use tasks
(which fetch/write data for you), or use pipelines directly
(which requires fetching/writing data yourself).</p></li>
<li><p><strong>Data validation</strong>: is called by pipelines to validate data (e.g. checking for flatliners).</p></li>
<li><p><strong>Feature engineering</strong>: is called by pipelines to select required features for training/forecasting based on the configuration from the prediction job (e.g. create new features for energy load of yesterday, last week).</p></li>
<li><p><strong>Machine learning</strong>: is called by pipelines to perform training, forecasting, or evaluation based on the configuration from the prediction job (e.g. train an XGB quantile model).</p></li>
<li><p><strong>Model storage</strong>: is called by pipelines to store or fetch trained machine learning model with MLFlow (e.g. store model locally in disk/database/s3_bucket on AWS).</p></li>
<li><p><strong>Post processing</strong>: is called by pipelines to post process forecasting (e.g. combine forecast dataframe with extra configuration information from prediction job or split load forecast into solar, wind, and energy usage forecast).</p></li>
<li><p><strong>Post processing</strong>: is called by pipelines to post process forecasting (e.g. combine forecast dataframe with extra configuration information from prediction job or split load forecast into solar, wind, and energy usage forecast).</p></li>
</ul>
<p>Tasks are provided in a separate Python package called <a class="reference external" href="https://pypi.org/project/openstef-dbc/">openstef-dbc</a>. If you need to use tasks, the openstef-dbc package is required in order to interface to databases for reading/writing.
Currently, openstef-dbc supports interfaces for a MySQL database for configuration data (e.g. information for prediction jobs) and <a class="reference external" href="https://www.influxdata.com/">InfluxDB</a> for feature data (e.g. weather, load, energy price data) and energy forecast data.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="high-level-methodology-openstef">
<h1>High level methodology OpenSTEF<a class="headerlink" href="#high-level-methodology-openstef" title="Link to this heading">¶</a></h1>
<p>OpenSTEF automates many typical activities in machine learning.
These include the combination of input data and preparation of features.
Furthermore, the train and predict methodology of OpenSTEF allows
for a single-shot, multi-horizon forecast. To provide a high-level overview
of these functionalities, a schematic depiction is given here.</p>
<figure class="align-default">
<img alt="Methodology overview" src="_images/methodology_train_predict.svg" /></figure>
<p><a class="reference external" href="_static/methodology_train_predict.pptx">Source file</a></p>
<p>OpenSTEF provides confidence estimates of it’s forecasts.
Two methods are available. The figure below explains the differences
and similarities between the two methods, as well as provide recommendations
on how to the confidence estimations should be used.</p>
<figure class="align-default">
<img alt="Uncertainty estimation" src="_images/uncertainty_estimation.svg" /></figure>
<p><a class="reference external" href="_static/methodology_train_predict.pptx">Source file</a></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="application-architecture">
<span id="id1"></span><h2>Application architecture<a class="headerlink" href="#application-architecture" title="Link to this heading">¶</a></h2>
<p>OpenSTEF is simply a software package (i.e. a Python library). If you’re looking to run it as a full application with a graphical user interface frontend, you must deploy it with additional components.</p>
<a class="reference internal image-reference" href="https://user-images.githubusercontent.com/25053215/184536367-c7914697-7a2a-45b8-b447-36aec1a6c1af.png"><img alt="https://user-images.githubusercontent.com/25053215/184536367-c7914697-7a2a-45b8-b447-36aec1a6c1af.png" src="https://user-images.githubusercontent.com/25053215/184536367-c7914697-7a2a-45b8-b447-36aec1a6c1af.png" style="width: 800px;" />
</a>
<p>Here are the recommended additional components if you want to run it as an application:</p>
<ul class="simple">
<li><p>Github repositories:</p>
<ul>
<li><p>(create yourself) <strong>Data fetcher</strong>: software package to fetch input data and write it to a database (e.g. a scheduled <a class="reference external" href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/">CronJob</a> to fetch weather data in Kubernetes).</p></li>
<li><p>(create yourself) <strong>Data API</strong>: API to provide data from a database or other source to applications and users (e.g. a REST API).</p></li>
<li><p>(create yourself) <strong>Forecaster</strong>: software package to fetch config/data and run OpenSTEF tasks/pipelines (e.g. a scheduled cron job to train/forecast in Kubernetes).</p></li>
<li><p>(open source) <strong>OpenSTEF</strong>: software package that performs machine learning to forecast energy loads on the energy grid.</p></li>
<li><p>(open source) <strong>OpenSTEF-dbc</strong>: software package that provides interface to read/write data from/to a database for openstef tasks.</p></li>
</ul>
</li>
<li><p>CI/CD Infrastructure</p>
<ul>
<li><p>(create yourself) <strong>Energy forecasting Application CI/CD</strong>: Continuous Integration/Continuous Delivery pipeline to build, test, and deploy your forecasting application (e.g. to Kubernetes via Jenkins, Chef, Puppet, Tekton, etc.).</p></li>
<li><p>(open source) <strong>OpenSTEF package CI/CD</strong>: A set of GitHub Actions that build, test, and publish the OpenSTEF package to PyPI <a class="reference external" href="https://pypi.org/project/openstef/">here</a> when it is time to release a new version.</p></li>
</ul>
</li>
<li><p><strong>Compute</strong>: compute resources to run your pipelines and tasks in production (e.g. on Kubernetes using any of the various providers AWS, Azure, GCP, Linode, etc.).</p></li>
<li><p><strong>Database</strong>: SQL, InfluxDB, or other database that stores fetched input data and forecasts.</p></li>
<li><p><strong>Dashboard</strong>: graphical user interface dashboard that allows uers to visualize application data (e.g. historic and forecasted energy loads)</p></li>
</ul>
<a class="reference internal image-reference" href="https://user-images.githubusercontent.com/60883372/146760483-29af3ac7-62af-4f13-98c7-982a79c517d1.jpg"><img alt="Screenshot of the operational dashboard showing the key functionality of OpenSTEF." src="https://user-images.githubusercontent.com/60883372/146760483-29af3ac7-62af-4f13-98c7-982a79c517d1.jpg" style="width: 800px;" />
</a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="split-forecast-domain-adaptation-for-zero-shot-learning-in-sequence-dazls">
<h1>Split forecast: Domain Adaptation for Zero Shot Learning in Sequence (DAZLS)<a class="headerlink" href="#split-forecast-domain-adaptation-for-zero-shot-learning-in-sequence-dazls" title="Link to this heading">¶</a></h1>
<p>DAZLS is an energy splitting function in OpenSTEF. Is a technique which
transfers knowledge from complete-information substations to
incomplete-information substations for solar and wind power prediction.
It is being used in <a class="reference internal" href="openstef.pipeline.html#module-openstef.pipeline.create_component_forecast" title="openstef.pipeline.create_component_forecast"><code class="xref py py-mod docutils literal notranslate"><span class="pre">openstef.pipeline.create_component_forecast</span></code></a>
to issue the prediction.</p>
<p>This function trains a splitting model on data from multiple substations
with known components and uses this model to carry out a prediction for
target substations with unknown components. The training data from the
known substations include weather, location, and total load information
of each substation and predicts the solar and the wind power of the
target substations.</p>
<p>The model is developed as a zero-shot learning method because it has to
carry out the prediction of target substations with unknown components
by using training data from other substations with known components. For
this purpose, the method is formulated as a 2-step approach by combining
two models deployed in sequence, the Domain and the Adaptation model.</p>
<p>The schema bellow depicts the structure of the DAZLS model. The input of
the model is data from the complete-information substations. For every
known substation we have input data, source metadata and output data. At
first, we feed the input data to train the Domain model. Domain model
gives a predicted output. This predicted output data, linked together
with the source metadata of each substation, is being used as the input
to train the Adaptation model. Then, the Adaptation model provides the
final output prediction of solar and wind power for the target
substations.</p>
<figure class="align-default" id="id2">
<img alt="Presentation3" src="https://user-images.githubusercontent.com/66070103/189650328-377ebb79-e8a7-40c6-acf3-64a5bb6197a4.jpg" />
<figcaption>
<p><span class="caption-text">Domain Adaptation Model</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>For more information about DAZLS model, see:</p>
<p>Teng, S.Y., van Nooten, C.C., van Doorn, J.M., Ottenbros, A., Huijbregts, M., Jansen, J.J.
Improving Near Real-Time Predictions of Renewable Electricity Production
at Substation Level (Submitted)</p>
<p>HOW TO USE: The code which loads and stores the DAZLS model is in the
notebook file
<a class="reference external" href="https://github.com/OpenSTEF/openstef-offline-example/tree/master/examples/05.%20Split%20net%20load%20into%20Components">05. Split net load into Components.ipynb</a>.
When running this notebook, a dazls_stored.sav file is being produced
and can be used in the prediction pipeline. It is important, whenever
there are changes in the
<a class="reference external" href="https://github.com/OpenSTEF/openstef/blob/main/openstef/model/regressors/dazls.py">dazls.py</a>,
to run again the notebook and use the
newly produced dazls_stored.sav file in the repository.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="overview-of-relational-database">
<h1>Overview of relational database<a class="headerlink" href="#overview-of-relational-database" title="Link to this heading">¶</a></h1>
<p>OpenSTEF uses a relational database to store information about prediction jobs and measurements. An ER diagram of this database is shown below.</p>
<a class="reference internal image-reference" href="_images/mysql_er_diagram.png"><img alt="_images/mysql_er_diagram.png" src="_images/mysql_er_diagram.png" style="width: 6.3in; height: 4.24236in;" />
</a>
<p>The necessary tables are described in more detail bellow:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>int</p></td>
<td><p>customer id</p></td>
<td><p>307</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>chr</p></td>
<td><p>customer name</p></td>
<td><p>Location_A</p></td>
</tr>
<tr class="row-even"><td><p>vip</p></td>
<td><p>bool</p></td>
<td><p>extra important
forecast (deprecated)</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>active</p></td>
<td><p>bool</p></td>
<td><p>activity status</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<p><strong>Customer</strong> : A customer is a collection of predictions. This can be a collection of predictions belonging to a customer but also a collection of prediction belonging to a specific location or substation.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>int</p></td>
<td><p>API key id</p></td>
<td><p>94</p></td>
</tr>
<tr class="row-odd"><td><p>cid</p></td>
<td><p>int</p></td>
<td><p>customer id</p></td>
<td><p>307</p></td>
</tr>
<tr class="row-even"><td><p>name</p></td>
<td><p>chr</p></td>
<td><p>customer name</p></td>
<td><p>Location_A</p></td>
</tr>
<tr class="row-odd"><td><p>apiKey</p></td>
<td><p>chr</p></td>
<td><p>API key value</p></td>
<td><p>uuid-Location_A</p></td>
</tr>
</tbody>
</table>
<p>For users to post measurements or retrieve forecasts related to a
specific customer (used internally by Alliander).</p>
<p><strong>customers_predictions</strong></p>
<p>Correspondence table between customer ids and prediction jobs ids.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>customer_id</p></td>
<td><p>int</p></td>
<td><p>customer id</p></td>
<td><p>307</p></td>
</tr>
<tr class="row-odd"><td><p>prediction_id</p></td>
<td><p>int</p></td>
<td><p>prediction job id</p></td>
<td><p>313</p></td>
</tr>
</tbody>
</table>
<p>Contains the generic load curves of wind turbines. These curves are
two-parameters sigmoids (center and slope).</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>chr</p></td>
<td><p>turbine name</p></td>
<td><p>Vestas V112</p></td>
</tr>
<tr class="row-odd"><td><p>cut_in</p></td>
<td><p>float</p></td>
<td><p>min wind speed to
produce (m/s)</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>cut_off</p></td>
<td><p>float</p></td>
<td><p>max wind speed to
produce (m/s)</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-odd"><td><p>kind</p></td>
<td><p>chr</p></td>
<td><p>onshore / offshore</p></td>
<td><p>onshore</p></td>
</tr>
<tr class="row-even"><td><p>manufacturer</p></td>
<td><p>chr</p></td>
<td></td>
<td><p>Enercon</p></td>
</tr>
<tr class="row-odd"><td><p>peak_capacity</p></td>
<td><p>float</p></td>
<td><p>max power (W)</p></td>
<td><p>3040270</p></td>
</tr>
<tr class="row-even"><td><p>rated_power</p></td>
<td><p>float</p></td>
<td><p>rated power (W)</p></td>
<td><p>3000000</p></td>
</tr>
<tr class="row-odd"><td><p>slope_center</p></td>
<td><p>float</p></td>
<td><p>Wind speed
corresponding to 50% of
rated power (m/s)</p></td>
<td><p>7.91</p></td>
</tr>
<tr class="row-even"><td><p>steepness</p></td>
<td><p>float</p></td>
<td><p>See formula</p></td>
<td><p>0.76</p></td>
</tr>
</tbody>
</table>
<p>In openstef/feature_engineering/weather_features.py, the power delivered
by a wind turbine is computed as</p>
<div class="math notranslate nohighlight">
\[P(v) = \frac{P_{rated}}{1 + e^{- k(v - c)}},\]</div>
<p>where <span class="math notranslate nohighlight">\(v\)</span> is the windspeed at hub height, <span class="math notranslate nohighlight">\(P_{rated}\)</span> =
rated_power, <span class="math notranslate nohighlight">\(k\)</span> = steepness and <span class="math notranslate nohighlight">\(c\)</span> = slope_center.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>regionInput</p></td>
<td><p>chr</p></td>
<td><p>region name</p></td>
<td><p>Leeuwarden</p></td>
</tr>
<tr class="row-odd"><td><p>lon</p></td>
<td><p>decimal</p></td>
<td><p>longitude</p></td>
<td><p>5.800</p></td>
</tr>
<tr class="row-even"><td><p>lat</p></td>
<td><p>decimal</p></td>
<td><p>latitude</p></td>
<td><p>53.201</p></td>
</tr>
</tbody>
</table>
<p>This table is used for looking up coordinates for specific locations that can be used directly for retrieving weather data.</p>
<p>Contains prediction jobs.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>int</p></td>
<td><p>prediction job id</p></td>
<td><p>313</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>chr</p></td>
<td><p>customer name</p></td>
<td><p>Location_A</p></td>
</tr>
<tr class="row-even"><td><p>forecast_type</p></td>
<td><p>chr</p></td>
<td><p>type of forecast</p></td>
<td><p>demand</p></td>
</tr>
<tr class="row-odd"><td><p>model</p></td>
<td><p>chr</p></td>
<td><p>type of model</p></td>
<td><p>xgb</p></td>
</tr>
<tr class="row-even"><td><p>created</p></td>
<td><p>datetime</p></td>
<td><p>creation datetime of
the prediction job</p></td>
<td><p>2019-05-16
14:53:38</p></td>
</tr>
<tr class="row-odd"><td><p>active</p></td>
<td><p>int</p></td>
<td><p>0 = off; 1 = on;</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>horizon_minutes</p></td>
<td><p>int</p></td>
<td><p>max forecast horizon
(minutes)</p></td>
<td><p>2880</p></td>
</tr>
<tr class="row-odd"><td><p>resolution_minutes</p></td>
<td><p>int</p></td>
<td><p>time resolution of
forecasts (minutes)</p></td>
<td><p>15</p></td>
</tr>
<tr class="row-even"><td><p>train_components</p></td>
<td><p>bool</p></td>
<td><p>Optional: Carry out energy splitting for this prediction job</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>ean</p></td>
<td><p>chr</p></td>
<td><p>EAN of the connectionpoint if the prediction corresponds to a connection point. See also: <a class="reference external" href="https://en.wikipedia.org/wiki/International_Article_Number">https://en.wikipedia.org/wiki/International_Article_Number</a></p></td>
<td><p>000000000000000003</p></td>
</tr>
</tbody>
</table>
<p><strong>Prediction</strong>: A prediction is the core concept in openSTEF and largley translate to the prediction_job in the openSTEF code. To make a prediction a prediction is usualy coupled to one or more systems. These systems provide the measurement data for which a forecast is made.</p>
<p>Correspondence table between prediction jobs and the set of quantiles to
forecast.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>int</p></td>
<td></td>
<td><p>22</p></td>
</tr>
<tr class="row-odd"><td><p>prediction_id</p></td>
<td><p>int</p></td>
<td><p>prediction job id</p></td>
<td><p>313</p></td>
</tr>
<tr class="row-even"><td><p>quantile_set_id</p></td>
<td><p>int</p></td>
<td><p>id of the quantile sets</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<p>Correspondence table between prediction jobs and systems.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>prediction_id</p></td>
<td><p>int</p></td>
<td><p>prediction job id</p></td>
<td><p>317</p></td>
</tr>
<tr class="row-odd"><td><p>system_id</p></td>
<td><p>chr</p></td>
<td><p>system id</p></td>
<td><p>Location_A_System_1</p></td>
</tr>
<tr class="row-even"><td><p>factor</p></td>
<td><p>double</p></td>
<td><p>Optional factor to multiply before addition</p></td>
<td><p>-2.0</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>A <strong>prediction job</strong> can correspond to multiple <strong>systems</strong></p></li>
<li><p>A <strong>system</strong> can be linked to multiple <strong>prediction jobs</strong></p></li>
<li><p>When mulitple systems are coupled to a prediction all these systems are added and the forecast is made for the sum. I ffor whatever reason a system should not be added but subtracted it is possible to set the factor to -1. Is some scaling needs to be carried out in the sum the factor can be changed from 1 (default) to the desired scaling factor.</p></li>
</ul>
<p><strong>System</strong> : Represents a physical measurement system. All metadata is saved in this SQL table, the actual timeseries can be retrieved from influx by the corresponding system id.</p>
<p>Contains the specifications of the quantile sets.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>int</p></td>
<td><p>quantile set id</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>quantiles</p></td>
<td><p>json</p></td>
<td><p>list of
quantiles</p></td>
<td><p>[0.05, 0.1, 0.3, 0.5,
0.7, 0.9, 0.95]</p></td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p>chr</p></td>
<td></td>
<td><p>Default quantile set</p></td>
</tr>
</tbody>
</table>
<p>Configuration for PV forecasts for each prediction job</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pid</p></td>
<td><p>int</p></td>
<td><p>prediction job id</p></td>
<td><p>123</p></td>
</tr>
<tr class="row-odd"><td><p>lat</p></td>
<td><p>double</p></td>
<td><p>latitude</p></td>
<td><p>51.9850343</p></td>
</tr>
<tr class="row-even"><td><p>lon</p></td>
<td><p>double</p></td>
<td><p>longitude</p></td>
<td><p>5.8956792</p></td>
</tr>
<tr class="row-odd"><td><p>radius</p></td>
<td><p>int</p></td>
<td><p>radius in km</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>peak_power</p></td>
<td><p>int</p></td>
<td><p>max power</p></td>
<td><p>1000</p></td>
</tr>
</tbody>
</table>
<p>2 cases:</p>
<ul class="simple">
<li><p>Radius = ‘None’ : when the forecast is for a specific system</p></li>
<li><p>Radius &gt; 0 when the forecast is for a region</p></li>
</ul>
<p>Contains informations about <strong>systems</strong>.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sid</p></td>
<td><p>chr</p></td>
<td><p>system id</p></td>
<td><p>Location_A_System_1</p></td>
</tr>
<tr class="row-odd"><td><p>origin</p></td>
<td><p>chr</p></td>
<td><p>origin of the
system data</p></td>
<td><p>ems (energy
management
system =
SCADA)</p></td>
</tr>
<tr class="row-even"><td><p>lat</p></td>
<td><p>double</p></td>
<td><p>latitude</p></td>
<td><p>5.837</p></td>
</tr>
<tr class="row-odd"><td><p>lon</p></td>
<td><p>double</p></td>
<td><p>longitude</p></td>
<td><p>51.813</p></td>
</tr>
<tr class="row-even"><td><p>region</p></td>
<td><p>chr</p></td>
<td></td>
<td><p>Gelderland</p></td>
</tr>
<tr class="row-odd"><td><p>timezone</p></td>
<td><p>chr</p></td>
<td></td>
<td><p>UTC</p></td>
</tr>
<tr class="row-even"><td><p>brand</p></td>
<td><p>chr</p></td>
<td><p>additional
information
on
measurements</p></td>
<td><p>accurate_inc</p></td>
</tr>
<tr class="row-odd"><td><p>freq</p></td>
<td><p>int</p></td>
<td><p>additional
information
on
measurements</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>qual</p></td>
<td><p>float</p></td>
<td><p>additional
information
on
measurements</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>lag</p></td>
<td><p>float</p></td>
<td><p>additional
information
on
measurements</p></td>
<td><p>15</p></td>
</tr>
<tr class="row-even"><td><p>created</p></td>
<td><p>datetime</p></td>
<td><p>Date when the system
is registred
in openSTEF</p></td>
<td><p>2021-01-25 09:44:00</p></td>
</tr>
<tr class="row-odd"><td><p>autoupdate</p></td>
<td><p>tinyint</p></td>
<td><p>deprecated</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>polarity</p></td>
<td><p>int</p></td>
<td><p>sign
convention
for
production
and load</p></td>
<td><p>-1/1</p></td>
</tr>
<tr class="row-odd"><td><p>measurements_customer_api_key_id</p></td>
<td><p>int</p></td>
<td><p>API to post
measurements</p></td>
<td><p>199</p></td>
</tr>
</tbody>
</table>
<p><strong>Polarity</strong> is a factor used to make the measurment comply with positive consumption and negative production of energy.</p>
<p>API key to retrieve systems measurements.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>int</p></td>
<td><p>API key id</p></td>
<td><p>199</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>chr</p></td>
<td></td>
<td><p>Measurements</p></td>
</tr>
<tr class="row-even"><td><p>apiKey</p></td>
<td><p>chr</p></td>
<td><p>API key value</p></td>
<td><p>uuid-Measurements</p></td>
</tr>
</tbody>
</table>
<p>Contains the locations of the weather stations. These are used when retrieving weather data for a prediction.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>created</p></td>
<td><p>datetime</p></td>
<td></td>
<td><p>2023-06-08
18:26:44</p></td>
</tr>
<tr class="row-odd"><td><p>input_city</p></td>
<td><p>chr</p></td>
<td></td>
<td><p>Deelen</p></td>
</tr>
<tr class="row-even"><td><p>lat</p></td>
<td><p>double</p></td>
<td></td>
<td><p>52.067</p></td>
</tr>
<tr class="row-odd"><td><p>lon</p></td>
<td><p>double</p></td>
<td></td>
<td><p>5.8</p></td>
</tr>
<tr class="row-even"><td><p>country</p></td>
<td><p>chr</p></td>
<td></td>
<td><p>NL</p></td>
</tr>
<tr class="row-odd"><td><p>active</p></td>
<td><p>int</p></td>
<td></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<p>This table is empty in openstef-reference. Contains the information for
the wind power forecast related to a prediction job.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Comment</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pid</p></td>
<td><p>int</p></td>
<td><p>prediction job id</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>lat</p></td>
<td><p>double</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>lon</p></td>
<td><p>double</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>turbine_type</p></td>
<td><p>chr</p></td>
<td><p>corresponds to the
field ‘name’ in
genericpowercurves</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>n_turbines</p></td>
<td><p>int</p></td>
<td><p>number of wind turbines</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>hub_height</p></td>
<td><p>int</p></td>
<td><p>height of the turbines
(m)</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>The hub height is used to extrapolate the wind speed forecast at the
correct height.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="overview-of-timeseries-database-schema">
<h1>Overview of timeseries database schema<a class="headerlink" href="#overview-of-timeseries-database-schema" title="Link to this heading">¶</a></h1>
<p>OpenSTEF uses a timeseries database to store all timeseries data. A diagram of its structure is shown bellow.</p>
<figure class="align-default">
<img alt="Diagram InlfuxDB" src="_images/influx_database_diagram.png" />
</figure>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="user_guides.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">User guides</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="api_reference.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">API reference</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Architecture, Methodology, and Components
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#software-architecture">
     Software architecture
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#high-level-methodology-openstef">
   High level methodology OpenSTEF
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#application-architecture">
     Application architecture
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#split-forecast-domain-adaptation-for-zero-shot-learning-in-sequence-dazls">
   Split forecast: Domain Adaptation for Zero Shot Learning in Sequence (DAZLS)
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview-of-relational-database">
   Overview of relational database
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview-of-timeseries-database-schema">
   Overview of timeseries database schema
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="_sources/architecture_methodology_components.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2017-2023 Contributors to the OpenSTEF project.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>